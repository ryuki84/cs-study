# HTTP Keep-Alive

## 1. 개념 정리
HTTP Keep-Alive는
하나의 TCP 연결을 여러 HTTP 요청/응답에 재사용하는 방식이다.

기본적으로 HTTP는 요청 하나당 연결을 생성하고 종료하는 구조였으나,
Keep-Alive를 사용하면 연결을 유지한 상태에서
여러 요청을 연속적으로 처리할 수 있다.

즉,
- Keep-Alive 미사용: 요청마다 TCP 연결 생성/종료
- Keep-Alive 사용: 하나의 TCP 연결을 재사용

이라고 볼 수 있다.

---

## 2. 왜 중요한가
TCP 연결을 생성하고 종료하는 과정에는
다음과 같은 비용이 발생한다.

- TCP 3-way handshake
- 소켓 생성 및 해제
- 커널 리소스 사용
- 네트워크 지연(RTT)

요청이 많아질수록 이 비용은 누적되며,
서버 성능 저하와 응답 지연의 원인이 된다.

특히 API 서버처럼
짧은 요청을 빈번하게 처리하는 환경에서는
Keep-Alive 여부가 성능에 큰 영향을 준다.

---

## 3. 백엔드 실무 관점
Spring 기반 WAS(Tomcat 등)는 기본적으로
HTTP Keep-Alive를 지원한다.

실무에서 Keep-Alive가 중요한 이유는 다음과 같다.

- 동일 클라이언트의 연속 요청 처리 효율 증가
- TCP 연결 생성 비용 감소
- 서버 스레드 및 네트워크 리소스 절약
- 전체 응답 시간 감소

또한 백엔드 서버는:
- DB Connection Pool
- HTTP Client(Connection Pool)

과 같이,
연결 재사용을 전제로 한 구조를 사용한다.
Keep-Alive는 이러한 구조의 전제가 되는 개념이다.

---

## 4. 트레이드오프 / 주의사항
- Keep-Alive는 성능을 향상시키지만,
  연결을 오래 유지하면 서버 리소스를 점유한다.
- Keep-Alive Timeout이 너무 길면
  유휴 연결이 쌓여 리소스 낭비가 발생할 수 있다.
- 너무 짧으면 Keep-Alive 효과가 줄어든다.

즉,
> 성능 향상을 위해 연결을 재사용하되,
> Timeout과 최대 연결 수를 적절히 조절해야 한다.

는 트레이드오프가 존재한다.

---

## 5. 예상 면접 질문 & 답변 연습

### Q1. HTTP Keep-Alive란 무엇인가요?
A.
HTTP Keep-Alive는 하나의 TCP 연결을 유지한 채
여러 HTTP 요청과 응답을 처리하는 방식으로,
연결 생성 비용을 줄여 성능을 향상시킵니다.

---

### Q2. Keep-Alive를 사용하지 않으면 어떤 문제가 있나요?
A.
요청마다 TCP 연결을 새로 생성해야 하므로
네트워크 지연과 서버 리소스 사용이 증가해
응답 시간이 느려질 수 있습니다.

---

### Q3. Keep-Alive는 무조건 사용하는 게 좋나요?
A.
대부분의 경우 성능에 유리하지만,
연결 유지 시간이 너무 길면
서버 리소스를 불필요하게 점유할 수 있어
Timeout 설정이 중요합니다.

---

## 6. 한 문장 요약 (면접용)
HTTP Keep-Alive는 TCP 연결을 재사용해
네트워크 오버헤드를 줄이고
서버 응답 성능을 개선하는 핵심 기법이다.
