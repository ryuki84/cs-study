# Transaction (트랜잭션)

## 1. 개념 정리
트랜잭션(Transaction)은
데이터베이스에서 논리적으로 하나의 작업 단위를 의미한다.

트랜잭션에 포함된 작업들은
모두 성공하거나, 하나라도 실패하면 모두 실패해야 한다.
이를 통해 데이터의 정합성과 일관성을 보장한다.

트랜잭션은 일반적으로 다음 네 가지 특성(ACID)을 가진다.

- Atomicity(원자성): 모두 성공 또는 모두 실패
- Consistency(일관성): 트랜잭션 전후 데이터는 일관된 상태 유지
- Isolation(격리성): 동시에 실행되는 트랜잭션 간 간섭 최소화
- Durability(지속성): 커밋된 데이터는 장애가 발생해도 유지

즉,
트랜잭션은 데이터베이스 정합성을 지키기 위한
가장 기본적인 제어 단위이다.

---

## 2. 왜 중요한가
백엔드 서버에서는 하나의 요청이
여러 SQL 작업으로 구성되는 경우가 많다.

트랜잭션을 사용하지 않으면:
- 일부 데이터만 반영되는 문제
- 중간 실패로 인한 데이터 불일치
- 복구가 어려운 장애 상황

이 발생할 수 있다.

특히 금융, 결제, 정산 시스템에서는
트랜잭션 처리 실패가 곧 금전적 오류로 이어질 수 있기 때문에
트랜잭션 개념은 단순 이론이 아니라 필수적인 실무 지식이다.

---

## 3. 백엔드 실무 관점
Spring 기반 백엔드에서는
서비스 로직 단위로 트랜잭션을 관리하는 것이 일반적이다.

실무에서의 특징은 다음과 같다.

- 하나의 API 요청 = 하나의 트랜잭션
- 여러 SQL 작업을 하나의 트랜잭션으로 묶음
- 예외 발생 시 전체 롤백

Spring에서는 `@Transactional`을 사용해
선언적으로 트랜잭션을 관리한다.

이때 주의할 점은:
- 트랜잭션 범위를 과도하게 넓히지 말 것
- 외부 API 호출을 트랜잭션 내부에서 최소화할 것
- 읽기 전용(read-only) 트랜잭션 활용

이다.

---

## 4. 트레이드오프 / 주의사항
- 트랜잭션 범위가 넓을수록 락 점유 시간이 길어진다.
- 락이 길어지면 동시 처리량이 감소한다.
- 잘못된 트랜잭션 설계는 데드락 가능성을 높인다.

즉,
> 트랜잭션은 정합성을 보장하지만,
> 성능과 동시성에는 비용이 따른다.

라는 트레이드오프가 존재한다.

---

## 5. 예상 면접 질문 & 답변 연습

### Q1. 트랜잭션이란 무엇인가요?
A.
트랜잭션은 데이터베이스에서
논리적으로 하나의 작업 단위를 의미하며,
모두 성공하거나 모두 실패하도록 처리해
데이터 정합성을 보장합니다.

---

### Q2. 트랜잭션을 사용하지 않으면 어떤 문제가 발생하나요?
A.
중간 단계만 반영되어 데이터가 불일치 상태가 되거나,
장애 발생 시 복구가 어려운 문제가 발생할 수 있습니다.

---

### Q3. 트랜잭션 범위를 넓게 잡으면 왜 문제가 되나요?
A.
락 점유 시간이 길어져 동시 처리 성능이 저하되고,
데드락 발생 가능성이 높아질 수 있기 때문입니다.

---

## 6. 한 문장 요약 (면접용)
트랜잭션은 데이터베이스에서
정합성과 일관성을 보장하기 위한 기본 단위이며,
실무에서는 성능과 동시성을 고려한 범위 설계가 핵심이다.
